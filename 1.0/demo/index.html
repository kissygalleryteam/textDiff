<!doctype html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>textDiff的demo</title>
    <script src="http://g.tbcdn.cn/kissy/k/1.3.0/kissy-min.js" charset="utf-8"></script>
    <style>
        span{background:#0F3;}
        b{font-weight:normal; background:#F30;}
        textarea{width:300px; height:120px;}
        table{font-size:14px; border-collapse:collapse;}
        table div{border:solid 1px #000; width:300px; height:300px; vertical-align:top;}
    </style>
</head>

<body>
<h2>文本diff工具</h2>
<table>
	<tr>
    	<td>
        	<h3>输入文本1</h3>
			<textarea id="text1">免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免</textarea>
        </td>
        <td>
        	<h3>输入文本2</h3>
			<textarea id="text2">免免免免免免免免免免免免免免免免免免免免免免免兔免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免兔免免免免免免免免免免免免免免免兔免免免免免免免免免免免免免免免免免免免免兔免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免免</textarea>
        </td>
    </tr>
    <tr>
    	<td colspan="2">
			<button id="diff">开始diff</button>
        </td>
    </tr>
	<tr>
    	<td><div id="diff1"></div></td>
        <td><div id="diff2"></div></td>
    </tr>
</table>
</body>

<script>
var S = KISSY;

if (S.Config.debug) {
	var srcPath = "../../../";
	S.config({
		packages:[
			{
				name:"gallery",
				path:srcPath,
				charset:"utf-8",
				ignorePackageNameInUri:true
			}
		]
	});
}

S.use('gallery/textDiff/1.0/index, node, event', function(S, TextDiff, Node, Event){
	var textDiff = new TextDiff();
	Node.one('#diff').on('click', function(){
		var text1 = Node.one('#text1').val();
		var text2 = Node.one('#text2').val();
		var diffs = textDiff.getDiff(text1, text2);
		Node.one('#diff1').html('<span>' + diffs[0] + '</span>');
		Node.one('#diff2').html('<span>' + diffs[1] + '</span>'); 
	});
});
</script>

</html>
